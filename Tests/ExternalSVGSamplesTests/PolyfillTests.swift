//
//  PolyfillTests.swift
//  SVGView
//
//  Tests for CoreGraphicsPolyfill.swift - comprehensive testing of the CoreGraphics
//  polyfill implementation for WASI/Linux platforms where CoreGraphics is not available.
//
//  These tests verify:
//  - CGAffineTransform operations (identity, translation, scaling, rotation, concatenation)
//  - CGPath functionality (basic operations, bounding box calculation, shape addition)
//  - MBezierPath operations (initialization, path building, transformations, arc handling)
//  - PathElement enum and extensions
//  - Edge cases and error handling
//
//  On platforms with native CoreGraphics (macOS, iOS), only a fallback test runs
//  since the polyfill types are aliases to the native CoreGraphics types.
//

import XCTest

@testable import SVGView

final class MermaidMindmapTests: XCTestCase {
    let svgCode1 = """
    <?xml version="1.0" encoding="utf-8"?>
    <svg aria-roledescription="flowchart-v2" class="flowchart" id="my-svg" role="graphics-document document" style="max-width: 581.375px; background-color: transparent;" viewBox="0 0 581.375 2668.39990234375" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style>#my-svg{font-family:"Helvetica Neue",sans-serif;font-size:16;fill:#1E1B1B;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:hsl(220.5882352941, 100%, 98.3333333333%);}#my-svg .error-text{fill:#1E1B1B;stroke:#1E1B1B;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#130D0C;stroke:#130D0C;}#my-svg .marker.cross{stroke:#130D0C;}#my-svg svg{font-family:"Helvetica Neue",sans-serif;font-size:16;}#my-svg p{margin:0;}#my-svg .label{font-family:"Helvetica Neue",sans-serif;color:#1E1B1B;}#my-svg .cluster-label text{fill:#1E1B1B;}#my-svg .cluster-label span{color:#1E1B1B;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#1E1B1B;color:#1E1B1B;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#130D0C!important;stroke-width:0;stroke:#130D0C;}#my-svg .arrowheadPath{fill:#0b0b0b;}#my-svg .edgePath .path{stroke:#130D0C;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#130D0C;fill:none;}#my-svg .edgeLabel{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#my-svg .edgeLabel p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);}#my-svg .edgeLabel rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#my-svg .labelBkg{background-color:rgba(243.9999999999, 220.9999999998, 255, 0.5);}#my-svg .cluster rect{fill:hsl(220.5882352941, 100%, 98.3333333333%);stroke:hsl(220.5882352941, 60%, 88.3333333333%);stroke-width:1px;}#my-svg .cluster text{fill:#1E1B1B;}#my-svg .cluster span{color:#1E1B1B;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"Helvetica Neue",sans-serif;font-size:12px;background:hsl(220.5882352941, 100%, 98.3333333333%);border:1px solid hsl(220.5882352941, 60%, 88.3333333333%);border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#1E1B1B;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#my-svg :root{mermaid-font-family:"Helvetica Neue",sans-serif;}</style><g><marker class="marker flowchart-v2" id="my-svg_flowchart-v2-pointEnd" markerHeight="8" markerUnits="userSpaceOnUse" markerWidth="8" orient="auto" refX="5" refY="5" viewBox="0 0 10 10"><path class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker class="marker flowchart-v2" id="my-svg_flowchart-v2-pointStart" markerHeight="8" markerUnits="userSpaceOnUse" markerWidth="8" orient="auto" refX="4.5" refY="5" viewBox="0 0 10 10"><path class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker class="marker flowchart-v2" id="my-svg_flowchart-v2-circleEnd" markerHeight="11" markerUnits="userSpaceOnUse" markerWidth="11" orient="auto" refX="11" refY="5" viewBox="0 0 10 10"><circle class="arrowMarkerPath" cx="5" cy="5" r="5" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker class="marker flowchart-v2" id="my-svg_flowchart-v2-circleStart" markerHeight="11" markerUnits="userSpaceOnUse" markerWidth="11" orient="auto" refX="-1" refY="5" viewBox="0 0 10 10"><circle class="arrowMarkerPath" cx="5" cy="5" r="5" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossEnd" markerHeight="11" markerUnits="userSpaceOnUse" markerWidth="11" orient="auto" refX="12" refY="5.2" viewBox="0 0 11 11"><path class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><marker class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossStart" markerHeight="11" markerUnits="userSpaceOnUse" markerWidth="11" orient="auto" refX="-1" refY="5.2" viewBox="0 0 11 11"><path class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><g class="root"><g class="clusters"/><g class="edgePaths"><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M80.522,1331.7L96.102,1142.933C111.681,954.167,142.841,576.633,163.979,387.867C185.117,199.1,196.234,199.1,201.793,199.1L207.352,199.1" id="L_A_B_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M81.795,1331.7L97.162,1217.433C112.53,1103.167,143.265,874.633,163.09,760.367C182.914,646.1,191.828,646.1,196.285,646.1L200.742,646.1" id="L_A_C_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M88.385,1331.7L102.654,1296.333C116.923,1260.967,145.462,1190.233,164.912,1154.867C184.362,1119.5,194.724,1119.5,199.905,1119.5L205.086,1119.5" id="L_A_D_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M88.385,1380.7L102.654,1416.067C116.923,1451.433,145.462,1522.167,164.091,1557.533C182.721,1592.9,191.443,1592.9,195.803,1592.9L200.164,1592.9" id="L_A_E_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M81.922,1380.7L97.268,1490.567C112.615,1600.433,143.307,1820.167,163.609,1930.033C183.911,2039.9,193.823,2039.9,198.779,2039.9L203.734,2039.9" id="L_A_F_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M80.569,1380.7L96.141,1565.067C111.713,1749.433,142.856,2118.167,161.928,2302.533C181,2486.9,188,2486.9,191.5,2486.9L195,2486.9" id="L_A_G_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M265.347,174.6L276.479,152.383C287.611,130.167,309.876,85.733,328.549,63.517C347.221,41.3,362.302,41.3,369.842,41.3L377.383,41.3" id="L_B_B1_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M294.789,199.1L301.014,199.1C307.24,199.1,319.69,199.1,336.209,199.1C352.728,199.1,373.315,199.1,383.609,199.1L393.902,199.1" id="L_B_B2_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M266.072,223.6L277.083,244.35C288.095,265.1,310.118,306.6,327.361,327.35C344.604,348.1,357.068,348.1,363.299,348.1L369.531,348.1" id="L_B_B3_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M266.072,621.6L277.083,600.85C288.095,580.1,310.118,538.6,328.893,517.85C347.669,497.1,363.198,497.1,370.962,497.1L378.727,497.1" id="L_C_C1_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M301.398,646.1L306.522,646.1C311.646,646.1,321.893,646.1,330.517,646.1C339.141,646.1,346.141,646.1,349.641,646.1L353.141,646.1" id="L_C_C2_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M265.347,670.6L276.479,692.817C287.611,715.033,309.876,759.467,329.517,781.683C349.159,803.9,366.177,803.9,374.686,803.9L383.195,803.9" id="L_C_C3_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M265.347,1095L276.479,1072.783C287.611,1050.567,309.876,1006.133,333.197,983.917C356.518,961.7,380.896,961.7,393.085,961.7L405.273,961.7" id="L_D_D1_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M297.055,1119.5L302.902,1119.5C308.75,1119.5,320.445,1119.5,330.361,1119.5C340.276,1119.5,348.411,1119.5,352.479,1119.5L356.547,1119.5" id="L_D_D2_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M265.347,1144L276.479,1166.217C287.611,1188.433,309.876,1232.867,332.168,1255.083C354.461,1277.3,376.781,1277.3,387.941,1277.3L399.102,1277.3" id="L_D_D3_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M265.347,1568.4L276.479,1546.183C287.611,1523.967,309.876,1479.533,326.132,1457.317C342.388,1435.1,352.635,1435.1,357.759,1435.1L362.883,1435.1" id="L_E_E1_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M301.977,1592.9L307.004,1592.9C312.031,1592.9,322.086,1592.9,340.374,1592.9C358.661,1592.9,385.182,1592.9,398.443,1592.9L411.703,1592.9" id="L_E_E2_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M266.072,1617.4L277.083,1638.15C288.095,1658.9,310.118,1700.4,331.084,1721.15C352.049,1741.9,371.958,1741.9,381.913,1741.9L391.867,1741.9" id="L_E_E3_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M266.072,2015.4L277.083,1994.65C288.095,1973.9,310.118,1932.4,325.236,1911.65C340.354,1890.9,348.568,1890.9,352.674,1890.9L356.781,1890.9" id="L_F_F1_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M298.406,2039.9L304.029,2039.9C309.651,2039.9,320.896,2039.9,336.841,2039.9C352.786,2039.9,373.432,2039.9,383.755,2039.9L394.078,2039.9" id="L_F_F2_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M266.072,2064.4L277.083,2085.15C288.095,2105.9,310.118,2147.4,328.675,2168.15C347.232,2188.9,362.323,2188.9,369.868,2188.9L377.414,2188.9" id="L_F_F3_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M266.072,2462.4L277.083,2441.65C288.095,2420.9,310.118,2379.4,332.895,2358.65C355.672,2337.9,379.203,2337.9,390.969,2337.9L402.734,2337.9" id="L_G_G1_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M307.141,2486.9L311.307,2486.9C315.474,2486.9,323.807,2486.9,335.206,2486.9C346.604,2486.9,361.068,2486.9,368.299,2486.9L375.531,2486.9" id="L_G_G2_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/><path class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" d="M266.072,2511.4L277.083,2532.15C288.095,2552.9,310.118,2594.4,324.768,2615.15C339.419,2635.9,346.698,2635.9,350.337,2635.9L353.977,2635.9" id="L_G_G3_0" marker-end="url(#my-svg_flowchart-v2-pointEnd)" style=""/></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject height="0" width="0"><div class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"/></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-A-0" transform="translate(78.5, 1356.1999950408936)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="141" x="-70.5" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Tropical Fruits</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-B-1" transform="translate(253.0703125, 199.0999984741211)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="83.4375" x="-41.71875" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Durian</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-C-2" transform="translate(253.0703125, 646.0999984741211)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="96.65625" x="-48.328125" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Jackfruit</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-D-3" transform="translate(253.0703125, 1119.4999961853027)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="87.96875" x="-43.984375" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Papaya</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-E-4" transform="translate(253.0703125, 1592.8999938964844)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="97.8125" x="-48.90625" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Avocado</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-F-5" transform="translate(253.0703125, 2039.8999938964844)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="90.671875" x="-45.3359375" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Banana</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-G-6" transform="translate(253.0703125, 2486.8999938964844)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="108.140625" x="-54.0703125" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Pineapple</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-B1-20" transform="translate(465.2578125, 41.29999923706055)"><rect class="basic label-container" height="66.5999984741211" rx="5" ry="5" style="" width="167.75" x="-83.875" y="-33.29999923706055"/><g class="label" style="" transform="translate(0, -18.299999237060547)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">300+ varieties in</tspan></tspan><tspan class="text-outer-tspan" dy="1.1em" x="0" y="1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Thailand</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-B2-22" transform="translate(465.2578125, 199.0999984741211)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="134.7109375" x="-67.35546875" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Strong odour</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-B3-24" transform="translate(465.2578125, 348.0999984741211)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="183.453125" x="-91.7265625" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Thorn-covered rind</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-C1-26" transform="translate(465.2578125, 497.0999984741211)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="165.0625" x="-82.53125" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Largest tree fruit</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-C2-28" transform="translate(465.2578125, 646.0999984741211)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="216.234375" x="-108.1171875" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">200-500 fruits per year</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-C3-30" transform="translate(465.2578125, 803.8999977111816)"><rect class="basic label-container" height="66.5999984741211" rx="5" ry="5" style="" width="156.125" x="-78.0625" y="-33.29999923706055"/><g class="label" style="" transform="translate(0, -18.299999237060547)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Tropical regions</tspan></tspan><tspan class="text-outer-tspan" dy="1.1em" x="0" y="1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">cultivation</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-D1-32" transform="translate(465.2578125, 961.6999969482422)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="111.96875" x="-55.984375" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">5-10m tall</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-D2-34" transform="translate(465.2578125, 1119.4999961853027)"><rect class="basic label-container" height="66.5999984741211" rx="5" ry="5" style="" width="209.421875" x="-104.7109375" y="-33.29999923706055"/><g class="label" style="" transform="translate(0, -18.299999237060547)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Large palmately lobed</tspan></tspan><tspan class="text-outer-tspan" dy="1.1em" x="0" y="1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">leaves</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-D3-36" transform="translate(465.2578125, 1277.2999954223633)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="124.3125" x="-62.15625" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Single stem</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-E1-38" transform="translate(465.2578125, 1435.0999946594238)"><rect class="basic label-container" height="66.5999984741211" rx="5" ry="5" style="" width="196.75" x="-98.375" y="-33.29999923706055"/><g class="label" style="" transform="translate(0, -18.299999237060547)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Mexico to Costa Rica</tspan></tspan><tspan class="text-outer-tspan" dy="1.1em" x="0" y="1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">origin</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-E2-40" transform="translate(465.2578125, 1592.8999938964844)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="99.109375" x="-49.5546875" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Oily fruit</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-E3-42" transform="translate(465.2578125, 1741.8999938964844)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="138.78125" x="-69.390625" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Alligator pear</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-F1-44" transform="translate(465.2578125, 1890.8999938964844)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="208.953125" x="-104.4765625" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Elongated curved fruit</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-F2-46" transform="translate(465.2578125, 2039.8999938964844)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="134.359375" x="-67.1796875" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Starchy flesh</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-F3-48" transform="translate(465.2578125, 2188.8999938964844)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="167.6875" x="-83.84375" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Multiple varieties</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-G1-50" transform="translate(465.2578125, 2337.8999938964844)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="117.046875" x="-58.5234375" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">1-1.5m tall</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-G2-52" transform="translate(465.2578125, 2486.8999938964844)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="171.453125" x="-85.7265625" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Up to 200 flowers</tspan></tspan></text></g></g></g><g class="node default" id="flowchart-G3-54" transform="translate(465.2578125, 2635.8999938964844)"><rect class="basic label-container" height="49" rx="5" ry="5" style="" width="214.5625" x="-107.28125" y="-24.5"/><g class="label" style="" transform="translate(0, -9.5)"><rect/><g><rect class="background" style="stroke: none"/><text style="" y="-10.1"><tspan class="text-outer-tspan" dy="1.1em" x="0" y="-0.1em"><tspan class="text-inner-tspan" font_style="normal" font_weight="normal">Multiple fruit formation</tspan></tspan></text></g></g></g></g></g></g><style>/* node color */
    #my-svg .node rect,
    #my-svg .node circle,
    #my-svg .node ellipse,
    #my-svg .node polygon,
    #my-svg .node path {
        fill: #45BFDB !important;
        stroke: #45BFDB;
        stroke-width: 2px;
    }
    </style></svg>
    """

    func testMermaidMindmap() {
        let node = SVGParser.parse(contentsOf: svgCode1)!
        let content = Serializer.serialize(node)
        print(content)
    }
}
